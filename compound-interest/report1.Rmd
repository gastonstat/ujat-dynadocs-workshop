---
title: "Compound Interest"
author: "Gaston Sanchez"
output: github_document
---

## A little bit of Financial Math

The Compound Interest Formula is given by:
$$
A = P \left(1 + \frac{r}{n} \right)^{nt}
$$

where:

- $P$ = principal amount (the initial amount you borrow or deposit).
- $r$ = annual interest rate (as a decimal).
- $t$ = number of years the amount is deposited or borrowed for.
- $A$ = amount of money accumulated after $n$ years, including interest.
- $n$ = number of times the interest is compounded per year .

We have a principal of $10, deposited in an account paying an annual intetest
rate of 5%, compounded quarterly:
```{r}
p0 = 10  # principal
p1 = p0 * (1 + (0.05 / 4))  # first year
p2 = p1 * (1 + (0.05 / 4))  # second year
p3 = p2 * (1 + (0.05 / 4))  # third year
p4 = p3 * (1 + (0.05 / 4))  # fourth year

payments <- c(p0, p1, p2, p3, p4)
payments
```

```{r}
init <- 10
interest <- 0.05
years <- 5
periods <- 12
a <- c(init, numeric(years * periods))
for (i in 2:length(a)) {
  a[i] <- a[i - 1] * (1 + (interest / periods))
}

plot(1:length(a), a, type = 'l', col = '#1390f0', las = 1)
```


We can write a function in R to implement the formula of the compound interest.
We'll use the following names for the function's arguments:

- $P$ = `principal`
- $r$ = `rate`
- $t$ = `years`
- $n$ = `times`

Here's a function `amount()` that uses the formula of the compound interest 
to compute the amount after $n$ years:
```{r}
amount <- function(principal = 1, rate = 0.01, years = 1, times = 12) {
  principal * (1 + rate / times)^(times * years)
}

# default usage
amount()
```

Now we can use `amount()` to find out what will be the balance after 6 years, 
of a principal of $1,500.00 deposited in a bank paying an annual 
interest rate of 4.3%, compounded quarterly:
```{r}
amount(1500, rate = 0.043, years = 6, times = 4)
```


### Continuous Compound Interest

When interest is compounded continually (i.e. $n \rightarrow \infty$), the 
compound interest equation takes the form:
$$
A = P e^{rt}
$$

Use your function `amount()` to calculate the final amount after $t = 1$ year, 
of an account initally with $P = \$10000$, at 6% interest rate, with the given compounding ($n$). As is shown, the method of compounding has little effect.

Different values for $A$ and $n$

- n=1 (yearly) --> $ 10600.00
- n=2 (semi-anually) --> $ 10609.00
- n=4 (quarterly) -->	$ 10613.64
- n=12 (monthly) --> $ 10616.78
- n=52 (weekly)	--> $ 10618.00
- n=365 (daily)	--> $ 10618.31

```{r}
amount(10000, rate = 0.06, years = 1, times = c(1, 2, 4, 12, 52, 365))
```

Use `times = 100000` to approximate $n = \infty$ and confirm that the compound
amount is $ 10618.37
```{r}
amount(10000, rate = 0.06, years = 1, times = 100000)
```

